@model UpdateProfilePasswordViewModel
@{
    Layout = "_Layout";
}


<div class=" content-area">
    <div class="page-header">
        <h4 class="page-title">Profile</h4>
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="#">Pages</a></li>
            <li class="breadcrumb-item active" aria-current="page">Profile</li>
        </ol>
    </div>
    <div class="row" id="user-profile">
        <div class="col-lg-4 col-md-12 col-sm-12 col-xl-3">
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">Profile</h2>
                </div>
                <div class="card-body p-0">
                    <div class="card-body bg-primary text-white">
                        <img src="..\..\assets\images\faces\male\@(Context.User.Identity.Name).jpeg" alt="" class="profile-img img-responsive center-block">
                        <a asp-controller="Account" asp-action="ProfileEdit" class="profile-image">
                            <span class="fa fa-pencil" aria-hidden="true"></span>
                        </a>
                        <div class="profile-label mt-3">
                            <span>@Model.UserProfileVM.Name @Model.UserProfileVM.Surname.ToUpper()</span>
                        </div>

                        <div class="profile-stars">
                            @if (Context.User.IsInRole(Roles.Admin))
                            {
                                <span class="badge badge-success">Administrator</span>
                            }
                            else if (Context.User.IsInRole(Roles.User))
                            {
                                <span class="badge badge-primary">User</span>
                            }
                            else if (Context.User.IsInRole(Roles.Passive))
                            {
                                <span class="badge badge-warning">Passive</span>

                                <br />
                                <small class="text text-warning">Please confirm your email address</small>
                            }
                        </div>

                        <div class="text-muted text-center"><small>Joined @Model.UserProfileVM.RegDate.ToShortDateString()</small></div>
                    </div>
                    <div class="border-bottom align-items-center">
                        <div class="card-body">
                            <div class="profile-details">
                                <div class="list-group list-group-transparent mb-0 mail-inbox">
                                    <a href="#" class="list-group-item list-group-item-action d-flex align-items-center">
                                        <span class="icon mr-3"><i class="fa fa-truck"></i></span>Orders: <span> - </span>
                                    </a>
                                    <a href="#" class="list-group-item list-group-item-action d-flex align-items-center">
                                        <span class="icon mr-3"><i class="fa fa-comment"></i></span>Posts: <span> - </span>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="p-3">
                        <div class="profile-message-btn center-block text-center">
                            <a href="#" class="btn btn-secondary btn-block">
                                <i class="fa fa-envelope"></i> Send message
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">Contact &amp; Personal Info</h2>
                </div>
                <div class="card-body">
                    <div class="media-list">



                        <div class="media">
                            <div class="mediaicon bg-secondary">
                                <i class="fa fa-envelope-o" aria-hidden="true"></i>
                            </div>
                            <div class="media-body ml-5">
                                <h6 class="mediafont text-dark mb-0">Email Address</h6><a class="d-block" href="mailto:@Model.UserProfileVM.Email">@Model.UserProfileVM.Email</a>
                            </div>
                            <!-- media-body -->
                        </div>

                    </div>
                </div>

            </div>
        </div>

        <div class="col-lg-8 col-md-12 col-sm-12 col-xl-9">
            <div class="card clearfix">
                <div class="card-header">
                    <h2 class="card-title">User info</h2>
                </div>
                <div class="card-body">
                    <div class="row profile-user-info">
                        <div class="col-lg-12">
                            <div class="table-responsive border ">
                                <table class="table row table-borderless w-100 m-0 ">
                                    <tbody class="col-lg-6 p-0">
                                        <tr>
                                            <td><strong>Full Name :</strong> @Model.UserProfileVM.Name @Model.UserProfileVM.Surname</td>
                                        </tr>
                                    </tbody>
                                    <tbody class="col-lg-6 p-0">

                                        <tr>
                                            <td><strong>Email :</strong> @Model.UserProfileVM.Email</td>
                                        </tr>
                                        <tr>
                                            <td><strong>Phone :</strong> Tel no gelecek.</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                </div>
            </div>

            <div class="card clearfix">
                <div class="card-header">
                    <h2 class="card-title">Location</h2>
                </div>
                <div class="card-body">

                    @*Google Maps Alanı*@
                    <div id="map"></div>

                </div>
            </div>
        </div>
    </div>
</div>

<style>
    #map {
        height: 400px;
        /* The height is 400 pixels */
        width: 100%;
        /* The width is the width of the web page */
    }
</style>
<script async
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB2Dnmjmg5Qq_HEEogbT1MtKx6jTtxLD-Y&callback=initMap">
</script>
<script  async src="https://maps.googleapis.com/maps/api/js?key=   APİKEY    &callback=initMap" defer></script>

<script>
   console.log("4.js");

var initMap = () =>{
    if(navigator.geolocation){
        navigator.geolocation.getCurrentPosition(showPosition);
    }
    else{
        console.log("Geolocation is not supported by this browser.");
    }
}

var showPosition = (position) => {
    console.log(position);
    var pos ={lat:position.coords.latitude,
              lng: position.coords.longitude
    };
    console.log(pos);
    var mapDiv = document.getElementById('map');
    var map = new google.maps.Map(mapDiv,{
        center:pos,
        zoom:18,
        mapTypeId: "terrain",
    });

    var marker = new google.maps.Marker({
        position:pos,
        map:map
    });

    map.addListener('click', (e) =>{
        console.log(e);
        var posClick = {
            lat: e.latLng.lat(),
            lng: e.latLng.lng()
        };
        //markerları temizle
        marker.setMap(null);
        //tıklanan konuma göre marker ekle
        marker = new google.maps.Marker({
            position:posClick,
            map:map,
            title: 'Clicked location',
            animation: google.maps.Animation.DROP
        });
    });

  
}
</script>